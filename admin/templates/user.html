{% extends "admin_base.html" %}
{% block title %}Th√¥ng tin{% endblock %}
{% block content %}
<style>
      .table-container {
        max-height: 40rem;
        overflow-y: auto;
        border: 1px solid #dee2e6;
        border-radius: 8px;
      }

      .table-container thead th {
        position: sticky;
        top: 0;
        z-index: 5;
        background: #212529; /* m√†u header */
        color: #fff;
        text-align: center;
      }

      .table-container table th,
      .table-container table td {
        text-align: center;
        vertical-align: middle;
      }
    </style>
<div class="container py-4">
      <h2>üë§ Qu·∫£n l√Ω ng∆∞·ªùi d√πng</h2>
      <div class="card shadow-sm p-3 bg-white">
        <div class="table-container">
          <table class="table table-bordered table-hover align-middle mb-0">
            <thead>
              <tr>
                <th>ID</th>
                <th>T√™n</th>
                <th>Email</th>
                <th>Ng√†y sinh</th>
                <th>Gi·ªõi t√≠nh</th>
                <th>H√†nh ƒë·ªông</th>
              </tr>
            </thead>
            <tbody>
            {% for user in users %}
              <tr>
                <td>{{user.id}}</td>
                <td>{{user.name}}</td>
                <td>{{user.email}}</td>
                <td>{{user.birthday|date:"d/m/Y" }}</td>
                <td>
      {% if user.gender == "F" %}
        N·ªØ
      {% elif user.gender == "M" %}
        Nam
      {% else %}
        Kh√°c
      {% endif %}
    </td>
                <td>
                  <a href="/admin/update_user/{{user.id}}" class="btn btn-sm btn-warning">
                    <i class="fa-solid fa-pen"></i>
                  </a>
                  <button class="btn btn-sm btn-danger"
                onclick="showConfirmModal('{{user.id}}','{{user.email}}')">
          <i class="fa-solid fa-trash"></i>
        </button>
                </td>
              </tr>
            {% endfor %}
            </tbody>
          </table>
            <div id="confirmModal" style="display:none;
     position:fixed; top:0; left:0; right:0; bottom:0;
     background:rgba(0,0,0,0.5);
     justify-content:center; align-items:center; z-index:9999;">
  <div style="background:#fff; padding:20px; border-radius:8px; width:350px; text-align:center;">
    <h5>‚ö†Ô∏è X√°c nh·∫≠n xo√°</h5>
    <p id="confirmText"></p>
    <div style="margin-top:15px;">
      <button class="btn btn-secondary" onclick="closeConfirmModal()">Hu·ª∑</button>
      <a id="confirmDeleteBtn" class="btn btn-danger">Xo√°</a>
    </div>
  </div>
</div>
        </div>
      </div>
    </div>
<script>
  function showConfirmModal(id, email) {
    document.getElementById("confirmText").innerText =
      "B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën xo√° ng∆∞·ªùi d√πng: " + email + " ?";
    document.getElementById("confirmDeleteBtn").href = "/admin/delete_user/" + id;
    document.getElementById("confirmModal").style.display = "flex";
  }

  function closeConfirmModal() {
    document.getElementById("confirmModal").style.display = "none";
  }
</script>
{% endblock %}